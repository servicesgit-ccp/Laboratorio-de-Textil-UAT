services:
  app:
    container_name: textile-app
    build:
      context: .
      dockerfile: Dockerfile
      args:
        VITE_REVERB_APP_KEY: ${VITE_REVERB_APP_KEY:-local-app-key}
        VITE_REVERB_HOST: ${VITE_REVERB_HOST:-localhost}
        VITE_REVERB_PORT: ${VITE_REVERB_PORT:-6001}
        VITE_REVERB_SCHEME: ${VITE_REVERB_SCHEME:-http}
        VITE_REVERB_CLUSTER: ${VITE_REVERB_CLUSTER:-mt1}
    env_file:
      - docker.env
    ports:
      - "8080:80"
      - "6001:6001"
    restart: unless-stopped
    networks:
      - textile-network

networks:
  textile-network:
    external: true
